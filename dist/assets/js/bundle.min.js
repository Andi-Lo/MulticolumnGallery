var columnBuilder=require("./ColumnBuilder"),resizeController=require("./ResizeController"),scrollController=require("./ScrollController"),REQUEST_PENDING=2,REQUEST_SUCCESS=4,requestResult,galleryController=function(){var e="";return function(){return e}}(),colBuilder=function(){var e="";return function(){return e}}();window.addEventListener("DOMContentLoaded",function(){var e=new GalleryFactory;e.requestGallery()},!1);var addControllers=function(){var e=new scrollController(requestResult,colBuilder),t=new resizeController(requestResult,colBuilder);return galleryController={scrlCtrl:e,resizeCtrl:t},t.setController(galleryController),e.setController(galleryController),window.addEventListener("scroll",scrollWrapper,!1),window.addEventListener("resize",updateWidth,!1),window.addEventListener("resize",resizeWrapper,!1),galleryController},scrollWrapper=function(){galleryController.scrlCtrl.handleScroll(colBuilder,galleryController,requestResult)},resizeWrapper=function(){galleryController.resizeCtrl.handleResize(colBuilder,galleryController,requestResult)},updateWidth=function(){galleryController.scrlCtrl.updateWidth(galleryController)},GalleryFactory=function(){"use strict";this.hasColumns=-1,this.columns=0,this.names="",this.resize="",this.fadeIn="",this.columnHeight="",this.galleryHeight=0,this.gallery=document.getElementById("gallery"),this.galleryWidth=gallery.offsetWidth,this.galleryHeight=gallery.offsetHeight,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.sData={width:this.windowWidth,galleryWidth:this.galleryWidth};var e=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length>0&&(t+="&"),t+=encodeURI(n+"="+e[n]));return t};this.requestGallery=function(){var t=new XMLHttpRequest;return t.open("POST","php/Gallery.php",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onreadystatechange=function(){switch(t.readyState){case REQUEST_PENDING:console.log("pending"),document.getElementsByClassName("ajax-loading")[0].style.display="block";break;case REQUEST_SUCCESS:console.log("success"),document.getElementsByClassName("ajax-loading")[0].style.display="none"}},t.onload=function(){if(t.status>=200&&t.status<400){var e=JSON.parse(t.responseText);console.log(e),requestResult=e,colBuilder=new columnBuilder.ColumnBuilder(requestResult),this.columns=e.numOfColumns,this.queries=e.mediaQueries,this.names=e.columnNames,this.resize=e.resize,this.fadeIn=e.fadeIn,this.columnHeight=e.columnHeight,this.activeColumn=e.activeColumn+"_Columns",this.galleryHeight=e.galleryHeight;for(var n=addControllers(),i=0;i<this.columns;i++)0===i?(colBuilder.buildColumn(this.names[i],requestResult),n.scrlCtrl.refreshScreen(n.scrlCtrl)):window.innerWidth>=this.queries[i]&&(colBuilder.buildColumn(this.activeColumn,requestResult),n.scrlCtrl.refreshScreen(n.scrlCtrl));return!0}return!1},t.onerror=function(){return console.log("Ajax Error: "+err),!1},t.send(e(this.sData)),!0}},ColumnBuilder=function(){"use strict";this.buildColumn=function(t,n){var i=n.galleryHeight,r=t.split("_"),l=parseInt(r[0],10)-1,o=document.getElementById("gallery"),s=window.innerHeight+window.pageYOffset,u=o.getElementsByClassName("mult-image"),a=o.getBoundingClientRect().top;if(tmpColumn!=l){if(tmpColumn=l,o.setAttribute("style","height: "+i[l]+"px;"),0!==u.length)for(var d=u.length-1;d>=0;d--)u[d].remove();return n[t].forEach(function(t,n){if("object"!=typeof t||null===t)return!1;var i;t.posY<=s&&a<=s?(i=e(t,"visible"),o.appendChild(i)):t.posY+a<=s+200&&(i=e(t,"hidden"),o.appendChild(i))}),!0}};var e=function(e,t){var n=document.createElement("a"),i=document.createElement("img"),r="visible"==t?1:0;return n.setAttribute("class","mult-image"),n.setAttribute("href",e.imgPath),i.setAttribute("class","mult-image-inner"),i.setAttribute("style","position:absolute; top:"+e.posY+"px; left:"+e.posX+"px; width:"+e.width+"px; height:"+e.height+"px; visibility:"+t+"; opacity: "+r+";"),i.setAttribute("src",e.thumbPath),i.setAttribute("alt",e.imgName),i.setAttribute("width",e.width),i.setAttribute("height",e.height),n.appendChild(i),n};this.addImgToColumn=function(t,n,i){var r="",l=document.getElementById("gallery"),o=l.getBoundingClientRect().top,s=i.activeColumn;return i[t].forEach(function(t,i){if("object"==typeof t&&null!==t&&t.id>imgId&&t.id-imgId<=1)if("1_Columns"==s&&t.posY+o<=n+500)r=e(t,"hidden"),l.appendChild(r),imgId=t.id;else{if(!(t.posY+o<=n+200))return;r=e(t,"hidden"),l.appendChild(r),imgId=t.id}}),!0}};ColumnBuilder.prototype.getTmpColumn=function(){return tmpColumn};var tmpColumn=function(){var e=-1;return function(){return e}}(),imgId=-1;module.exports.tmpColumn=tmpColumn,module.exports.ColumnBuilder=ColumnBuilder;var ResizeController=function(e,t){"use strict";this.requestResult=e,this.winWidth=window.innerWidth,this.winHeight=window.innerHeight,this.names=e.columnNames,this.columns=e.numOfColumns,this.queries=e.mediaQueries,this.resize=e.resize,this.galleryCtrl="",this.columnBuilder=t,this.getColumnBuilder=function(){return this.columnBuilder},this.getGalleryController=function(){return this.galleryCtrl}};ResizeController.prototype.setController=function(e){this.galleryCtrl=e},ResizeController.prototype.handleResize=function(e,t,n){var i=(t.resizeCtrl,t.scrlCtrl),r=n.columnNames,l=n.numOfColumns,o=n.mediaQueries,s=n.resize;if("yes"==s){if(window.innerWidth<=o[0])return e.buildColumn(r[0],n),void i.refreshScreen(i);if(window.innerWidth>=o[o.length-1])return e.buildColumn(r[l-1],n),void i.refreshScreen(i);if(window.innerWidth>=o[0])for(var u=0;u<=l-1;u++)if(window.innerWidth<=o[u])return e.buildColumn(r[u-1],n),void i.refreshScreen(i)}},module.exports=ResizeController;var scrollPosSave=0,ScrollController=function(e,t){"use strict";e=e,this.scrollEvents=0,this.innerWinHeight=window.innerHeight,this.scrollHeight=this.innerWinHeight,this.winWidth=window.innerWidth,this.timeoutId=0,this.names=e.columnNames,this.columnBuilder=t,this.galleryCtrl="",this.getColumnBuilder=function(){return this.columnBuilder},this.fadeIn=function(e){e[0].style.opacity=0;var t=+new Date,n=function(){e[0].style.opacity=+e[0].style.opacity+(new Date-t)/400,t=+new Date,+e[0].style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))};n()},this.refreshScreenOnScroll=function(t,n){for(var i=e.fadeIn,r=window.pageYOffset,l=document.getElementsByClassName("mult-image-inner"),o=l.length-1;o>=0;o--){var s=window.getComputedStyle(l[o]),u=parseInt(s.getPropertyValue("top"),10),a=l[o].style.visibility,d=r-t;d>=u&&"NaN"!=u&&"hidden"==a&&(l[o].style.visibility="visible","yes"==i&&l[o].style.opacity<1&&n.fadeIn([l[o]]),scrollPosSave=r)}},this.refreshScreen=function(e){for(var t=window.pageYOffset,n=document.getElementsByClassName("mult-image-inner"),i=n.length-1;i>=0;i--){var r=window.getComputedStyle(n[i]),l=parseInt(r.getPropertyValue("top"),10);t>=l&&"NaN"!=l&&(n[i].style.visibility="visible",scrollPosSave=t)}}};ScrollController.prototype.setController=function(e){e=e},ScrollController.prototype.getGalleryController=function(){return this.galleryCtrl},ScrollController.prototype.setColumnBuilder=function(e){this.columnBuilder=e},ScrollController.prototype.updateWidth=function(e){var t=e.scrlCtrl;t.winWidth=window.innerWidth},ScrollController.prototype.handleScroll=function(e,t,n){var i=t.scrlCtrl,r=i.innerWinHeight+window.pageYOffset;r>scrollPosSave&&(window.innerWidth>767?i.refreshScreenOnScroll(100,i):window.innerWidth<=768&&i.refreshScreenOnScroll(30,i),i.timeoutId&&clearTimeout(i.timeoutId),i.timeoutId=setTimeout(function(){e.addImgToColumn(i.names[e.getTmpColumn()],r,n),i.refreshScreenOnScroll(30,i)},50))};var requestResult=function(){var e="";return function(){return e}}();module.exports=ScrollController,function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(l)return l(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return r(n?n:e)},d,d.exports,e,t,n,i)}return n[o].exports}for(var l="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){var i,r=e("./ColumnBuilder"),l=e("./ResizeController"),o=e("./ScrollController"),s=2,u=4,a=function(){var e="";return function(){return e}}(),d=function(){var e="";return function(){return e}}();window.addEventListener("DOMContentLoaded",function(){var e=new g;e.requestGallery()},!1);var h=function(){var e=new o(i,d),t=new l(i,d);return a={scrlCtrl:e,resizeCtrl:t},t.setController(a),e.setController(a),window.addEventListener("scroll",c,!1),window.addEventListener("resize",f,!1),window.addEventListener("resize",m,!1),a},c=function(){a.scrlCtrl.handleScroll(d,a,i)},m=function(){a.resizeCtrl.handleResize(d,a,i)},f=function(){a.scrlCtrl.updateWidth(a)},g=function(){"use strict";this.hasColumns=-1,this.columns=0,this.names="",this.resize="",this.fadeIn="",this.columnHeight="",this.galleryHeight=0,this.gallery=document.getElementById("gallery"),this.galleryWidth=gallery.offsetWidth,this.galleryHeight=gallery.offsetHeight,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.sData={width:this.windowWidth,galleryWidth:this.galleryWidth};var e=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length>0&&(t+="&"),t+=encodeURI(n+"="+e[n]));return t};this.requestGallery=function(){var t=new XMLHttpRequest;return t.open("POST","php/Gallery.php",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onreadystatechange=function(){switch(t.readyState){case s:console.log("pending"),document.getElementsByClassName("ajax-loading")[0].style.display="block";break;case u:console.log("success"),document.getElementsByClassName("ajax-loading")[0].style.display="none"}},t.onload=function(){if(t.status>=200&&t.status<400){var e=JSON.parse(t.responseText);console.log(e),i=e,d=new r.ColumnBuilder(i),this.columns=e.numOfColumns,this.queries=e.mediaQueries,this.names=e.columnNames,this.resize=e.resize,this.fadeIn=e.fadeIn,this.columnHeight=e.columnHeight,this.activeColumn=e.activeColumn+"_Columns",this.galleryHeight=e.galleryHeight;for(var n=h(),l=0;l<this.columns;l++)0===l?(d.buildColumn(this.names[l],i),n.scrlCtrl.refreshScreen(n.scrlCtrl)):window.innerWidth>=this.queries[l]&&(d.buildColumn(this.activeColumn,i),n.scrlCtrl.refreshScreen(n.scrlCtrl));return!0}return!1},t.onerror=function(){return console.log("Ajax Error: "+err),!1},t.send(e(this.sData)),!0}}},{"./ColumnBuilder":2,"./ResizeController":3,"./ScrollController":4}],2:[function(e,t,n){var i=function(){"use strict";this.buildColumn=function(t,n){var i=n.galleryHeight,l=t.split("_"),o=parseInt(l[0],10)-1,s=document.getElementById("gallery"),u=window.innerHeight+window.pageYOffset,a=s.getElementsByClassName("mult-image"),d=s.getBoundingClientRect().top;if(r!=o){if(r=o,s.setAttribute("style","height: "+i[o]+"px;"),0!==a.length)for(var h=a.length-1;h>=0;h--)a[h].remove();return n[t].forEach(function(t,n){if("object"!=typeof t||null===t)return!1;var i;t.posY<=u&&d<=u?(i=e(t,"visible"),s.appendChild(i)):t.posY+d<=u+200&&(i=e(t,"hidden"),s.appendChild(i))}),!0}};var e=function(e,t){var n=document.createElement("a"),i=document.createElement("img"),r="visible"==t?1:0;return n.setAttribute("class","mult-image"),n.setAttribute("href",e.imgPath),i.setAttribute("class","mult-image-inner"),i.setAttribute("style","position:absolute; top:"+e.posY+"px; left:"+e.posX+"px; width:"+e.width+"px; height:"+e.height+"px; visibility:"+t+"; opacity: "+r+";"),i.setAttribute("src",e.thumbPath),i.setAttribute("alt",e.imgName),i.setAttribute("width",e.width),i.setAttribute("height",e.height),n.appendChild(i),n};this.addImgToColumn=function(t,n,i){var r="",o=document.getElementById("gallery"),s=o.getBoundingClientRect().top,u=i.activeColumn;return i[t].forEach(function(t,i){if("object"==typeof t&&null!==t&&t.id>l&&t.id-l<=1)if("1_Columns"==u&&t.posY+s<=n+500)r=e(t,"hidden"),o.appendChild(r),l=t.id;else{if(!(t.posY+s<=n+200))return;r=e(t,"hidden"),o.appendChild(r),l=t.id}}),!0}};i.prototype.getTmpColumn=function(){return r};var r=function(){var e=-1;return function(){return e}}(),l=-1;t.exports.tmpColumn=r,t.exports.ColumnBuilder=i},{}],3:[function(e,t,n){var i=function(e,t){"use strict";this.requestResult=e,this.winWidth=window.innerWidth,this.winHeight=window.innerHeight,this.names=e.columnNames,this.columns=e.numOfColumns,this.queries=e.mediaQueries,this.resize=e.resize,this.galleryCtrl="",this.columnBuilder=t,this.getColumnBuilder=function(){return this.columnBuilder},this.getGalleryController=function(){return this.galleryCtrl}};i.prototype.setController=function(e){this.galleryCtrl=e},i.prototype.handleResize=function(e,t,n){var i=(t.resizeCtrl,t.scrlCtrl),r=n.columnNames,l=n.numOfColumns,o=n.mediaQueries,s=n.resize;if("yes"==s){if(window.innerWidth<=o[0])return e.buildColumn(r[0],n),void i.refreshScreen(i);if(window.innerWidth>=o[o.length-1])return e.buildColumn(r[l-1],n),void i.refreshScreen(i);if(window.innerWidth>=o[0])for(var u=0;u<=l-1;u++)if(window.innerWidth<=o[u])return e.buildColumn(r[u-1],n),void i.refreshScreen(i)}},t.exports=i},{}],4:[function(e,t,n){var i=0,r=function(e,t){"use strict";e=e,this.scrollEvents=0,this.innerWinHeight=window.innerHeight,this.scrollHeight=this.innerWinHeight,this.winWidth=window.innerWidth,this.timeoutId=0,this.names=e.columnNames,this.columnBuilder=t,this.galleryCtrl="",this.getColumnBuilder=function(){return this.columnBuilder},this.fadeIn=function(e){e[0].style.opacity=0;var t=+new Date,n=function(){e[0].style.opacity=+e[0].style.opacity+(new Date-t)/400,t=+new Date,+e[0].style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))};n()},this.refreshScreenOnScroll=function(t,n){for(var r=e.fadeIn,l=window.pageYOffset,o=document.getElementsByClassName("mult-image-inner"),s=o.length-1;s>=0;s--){var u=window.getComputedStyle(o[s]),a=parseInt(u.getPropertyValue("top"),10),d=o[s].style.visibility,h=l-t;h>=a&&"NaN"!=a&&"hidden"==d&&(o[s].style.visibility="visible","yes"==r&&o[s].style.opacity<1&&n.fadeIn([o[s]]),i=l)}},this.refreshScreen=function(e){for(var t=window.pageYOffset,n=document.getElementsByClassName("mult-image-inner"),r=n.length-1;r>=0;r--){var l=window.getComputedStyle(n[r]),o=parseInt(l.getPropertyValue("top"),10);t>=o&&"NaN"!=o&&(n[r].style.visibility="visible",i=t)}}};r.prototype.setController=function(e){e=e},r.prototype.getGalleryController=function(){return this.galleryCtrl},r.prototype.setColumnBuilder=function(e){this.columnBuilder=e},r.prototype.updateWidth=function(e){var t=e.scrlCtrl;t.winWidth=window.innerWidth},r.prototype.handleScroll=function(e,t,n){var r=t.scrlCtrl,l=r.innerWinHeight+window.pageYOffset;l>i&&(window.innerWidth>767?r.refreshScreenOnScroll(100,r):window.innerWidth<=768&&r.refreshScreenOnScroll(30,r),r.timeoutId&&clearTimeout(r.timeoutId),r.timeoutId=setTimeout(function(){e.addImgToColumn(r.names[e.getTmpColumn()],l,n),r.refreshScreenOnScroll(30,r)},50))};(function(){var e="";return function(){return e}})();t.exports=r},{}]},{},[1]),function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(l)return l(o,!0);throw new Error("Cannot find module '"+o+"'")}var a=n[o]={exports:{}};e[o][0].call(a.exports,function(t){var n=e[o][1][t];return r(n?n:t)},a,a.exports,t,e,n,i)}return n[o].exports}for(var l="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){var i=function(){"use strict";this.buildColumn=function(t,n){var i=n.galleryHeight,l=t.split("_"),o=parseInt(l[0],10)-1,s=document.getElementById("gallery"),u=window.innerHeight+window.pageYOffset,a=s.getElementsByClassName("mult-image"),d=s.getBoundingClientRect().top;if(r!=o){if(r=o,s.setAttribute("style","height: "+i[o]+"px;"),0!==a.length)for(var h=a.length-1;h>=0;h--)a[h].remove();return n[t].forEach(function(t,n){if("object"!=typeof t||null===t)return!1;var i;t.posY<=u&&d<=u?(i=e(t,"visible"),s.appendChild(i)):t.posY+d<=u+200&&(i=e(t,"hidden"),s.appendChild(i))}),!0}};var e=function(e,t){var n=document.createElement("a"),i=document.createElement("img"),r="visible"==t?1:0;return n.setAttribute("class","mult-image"),n.setAttribute("href",e.imgPath),i.setAttribute("class","mult-image-inner"),i.setAttribute("style","position:absolute; top:"+e.posY+"px; left:"+e.posX+"px; width:"+e.width+"px; height:"+e.height+"px; visibility:"+t+"; opacity: "+r+";"),i.setAttribute("src",e.thumbPath),i.setAttribute("alt",e.imgName),i.setAttribute("width",e.width),i.setAttribute("height",e.height),n.appendChild(i),n};this.addImgToColumn=function(t,n,i){var r="",o=document.getElementById("gallery"),s=o.getBoundingClientRect().top,u=i.activeColumn;return i[t].forEach(function(t,i){if("object"==typeof t&&null!==t&&t.id>l&&t.id-l<=1)if("1_Columns"==u&&t.posY+s<=n+500)r=e(t,"hidden"),o.appendChild(r),l=t.id;else{if(!(t.posY+s<=n+200))return;r=e(t,"hidden"),o.appendChild(r),l=t.id}}),!0}};i.prototype.getTmpColumn=function(){return r};var r=function(){var e=-1;return function(){return e}}(),l=-1;t.exports.tmpColumn=r,t.exports.ColumnBuilder=i},{}],2:[function(e,t,n){var i=function(e,t){"use strict";this.requestResult=e,this.winWidth=window.innerWidth,this.winHeight=window.innerHeight,this.names=e.columnNames,this.columns=e.numOfColumns,this.queries=e.mediaQueries,this.resize=e.resize,this.galleryCtrl="",this.columnBuilder=t,this.getColumnBuilder=function(){return this.columnBuilder},this.getGalleryController=function(){return this.galleryCtrl}};i.prototype.setController=function(e){this.galleryCtrl=e},i.prototype.handleResize=function(e,t,n){var i=(t.resizeCtrl,t.scrlCtrl),r=n.columnNames,l=n.numOfColumns,o=n.mediaQueries,s=n.resize;if("yes"==s){if(window.innerWidth<=o[0])return e.buildColumn(r[0],n),void i.refreshScreen(i);if(window.innerWidth>=o[o.length-1])return e.buildColumn(r[l-1],n),void i.refreshScreen(i);if(window.innerWidth>=o[0])for(var u=0;u<=l-1;u++)if(window.innerWidth<=o[u])return e.buildColumn(r[u-1],n),void i.refreshScreen(i)}},t.exports=i},{}],3:[function(e,t,n){var i=0,r=function(e,t){"use strict";e=e,this.scrollEvents=0,this.innerWinHeight=window.innerHeight,this.scrollHeight=this.innerWinHeight,this.winWidth=window.innerWidth,this.timeoutId=0,this.names=e.columnNames,this.columnBuilder=t,this.galleryCtrl="",this.getColumnBuilder=function(){return this.columnBuilder},this.fadeIn=function(e){e[0].style.opacity=0;var t=+new Date,n=function(){e[0].style.opacity=+e[0].style.opacity+(new Date-t)/400,t=+new Date,+e[0].style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))};n()},this.refreshScreenOnScroll=function(t,n){for(var r=e.fadeIn,l=window.pageYOffset,o=document.getElementsByClassName("mult-image-inner"),s=o.length-1;s>=0;s--){var u=window.getComputedStyle(o[s]),a=parseInt(u.getPropertyValue("top"),10),d=o[s].style.visibility,h=l-t;h>=a&&"NaN"!=a&&"hidden"==d&&(o[s].style.visibility="visible","yes"==r&&o[s].style.opacity<1&&n.fadeIn([o[s]]),i=l)}},this.refreshScreen=function(e){for(var t=window.pageYOffset,n=document.getElementsByClassName("mult-image-inner"),r=n.length-1;r>=0;r--){var l=window.getComputedStyle(n[r]),o=parseInt(l.getPropertyValue("top"),10);t>=o&&"NaN"!=o&&(n[r].style.visibility="visible",i=t)}}};r.prototype.setController=function(e){e=e},r.prototype.getGalleryController=function(){return this.galleryCtrl},r.prototype.setColumnBuilder=function(e){this.columnBuilder=e},r.prototype.updateWidth=function(e){var t=e.scrlCtrl;t.winWidth=window.innerWidth},r.prototype.handleScroll=function(e,t,n){var r=t.scrlCtrl,l=r.innerWinHeight+window.pageYOffset;l>i&&(window.innerWidth>767?r.refreshScreenOnScroll(100,r):window.innerWidth<=768&&r.refreshScreenOnScroll(30,r),r.timeoutId&&clearTimeout(r.timeoutId),r.timeoutId=setTimeout(function(){e.addImgToColumn(r.names[e.getTmpColumn()],l,n),r.refreshScreenOnScroll(30,r)},50))};(function(){var e="";return function(){return e}})();t.exports=r},{}],4:[function(e,t,n){var i,r=e("./ColumnBuilder"),l=e("./ResizeController"),o=e("./ScrollController"),s=2,u=4,a=function(){var e="";return function(){return e}}(),d=function(){var e="";return function(){return e}}();window.addEventListener("DOMContentLoaded",function(){var e=new g;e.requestGallery()},!1);var h=function(){var e=new o(i,d),t=new l(i,d);return a={scrlCtrl:e,resizeCtrl:t},t.setController(a),e.setController(a),window.addEventListener("scroll",c,!1),window.addEventListener("resize",f,!1),window.addEventListener("resize",m,!1),a},c=function(){a.scrlCtrl.handleScroll(d,a,i)},m=function(){a.resizeCtrl.handleResize(d,a,i)},f=function(){a.scrlCtrl.updateWidth(a)},g=function(){"use strict";this.hasColumns=-1,this.columns=0,this.names="",this.resize="",this.fadeIn="",this.columnHeight="",this.galleryHeight=0,this.gallery=document.getElementById("gallery"),this.galleryWidth=gallery.offsetWidth,this.galleryHeight=gallery.offsetHeight,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.sData={width:this.windowWidth,galleryWidth:this.galleryWidth};var e=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length>0&&(t+="&"),t+=encodeURI(n+"="+e[n]));return t};this.requestGallery=function(){var t=new XMLHttpRequest;return t.open("POST","php/Gallery.php",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onreadystatechange=function(){switch(t.readyState){case s:console.log("pending"),document.getElementsByClassName("ajax-loading")[0].style.display="block";break;case u:console.log("success"),document.getElementsByClassName("ajax-loading")[0].style.display="none"}},t.onload=function(){if(t.status>=200&&t.status<400){var e=JSON.parse(t.responseText);console.log(e),i=e,d=new r.ColumnBuilder(i),this.columns=e.numOfColumns,this.queries=e.mediaQueries,this.names=e.columnNames,this.resize=e.resize,this.fadeIn=e.fadeIn,this.columnHeight=e.columnHeight,this.activeColumn=e.activeColumn+"_Columns",this.galleryHeight=e.galleryHeight;for(var n=h(),l=0;l<this.columns;l++)0===l?(d.buildColumn(this.names[l],i),n.scrlCtrl.refreshScreen(n.scrlCtrl)):window.innerWidth>=this.queries[l]&&(d.buildColumn(this.activeColumn,i),n.scrlCtrl.refreshScreen(n.scrlCtrl));return!0}return!1},t.onerror=function(){return console.log("Ajax Error: "+err),!1},t.send(e(this.sData)),!0}}},{"./ColumnBuilder":1,"./ResizeController":2,"./ScrollController":3}]},{},[4]);